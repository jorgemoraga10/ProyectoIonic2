{"version":3,"sources":["./src/app/pages/opinions/opinions-routing.module.ts","./src/app/pages/opinions/opinions.module.ts","./src/app/pages/opinions/opinions.page.ts","./src/app/pages/opinions/opinions.page.scss","./src/app/pages/opinions/opinions.page.html"],"names":[],"mappings":"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","file":"src_app_pages_opinions_opinions_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PruebaGuard } from 'src/app/guards/prueba.guard';\n\nimport { OpinionsPage } from './opinions.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OpinionsPage,\n    canActivate: [PruebaGuard],\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OpinionsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OpinionsPageRoutingModule } from './opinions-routing.module';\n\nimport { OpinionsPage } from './opinions.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    OpinionsPageRoutingModule\n  ],\n  declarations: [OpinionsPage]\n})\nexport class OpinionsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\n\nimport { OpinionsApiService } from 'src/app/services/opinions-api.service';\nimport { UserDataService } from '../../services/user-data.service';\n\n\n@Component({\n  selector: 'app-opinions',\n  templateUrl: './opinions.page.html',\n  styleUrls: ['./opinions.page.scss'],\n})\n\n\nexport class OpinionsPage implements OnInit {\n\n  user:any;\n  posts: any;\n  post: any = { userId: null, id: null, title: \"\", body: \"\" }\n  ionicForm: FormGroup;\n  isSubmitted = false;\n\n\n  constructor( private api: OpinionsApiService,\n               private router: Router,\n               private userData: UserDataService,\n               public formBuilder: FormBuilder) {\n\n  }\n  \n\n\n  ngOnInit() {\n    //Validaciones del form\n    this.ionicForm = this.formBuilder.group({\n      title: ['', [Validators.required, Validators.minLength(3)]],\n      opinion: ['', [Validators.required, Validators.minLength(5)]],\n    });\n  }\n\n\n\n  async ionViewWillEnter(){\n    await this.getPosts();\n  }\n\n \n\n  async getPosts(){\n\n    const users = await this.userData.loadUser()                      //cargo los users del storage\n    const { userId, nombre }  = users.filter( u => u.active === true )[0]    //busco al que este activo\n    this.user = nombre; \n\n    this.api.getPostbyUserId( userId ).subscribe( data => {\n      this.posts = data;\n      this.posts.reverse();\n    });\n  }\n\n\n  getPost( id ){\n    this.api.getPost( id ).subscribe( data => this.post = data );\n  }\n\n\n\n  async guardarPost(){ \n    \n    const users = await this.userData.loadUser()                      //cargo los users del storage\n    const { userId, nombre }  = users.filter( u => u.active === true )[0]    //busco al que este activo\n    this.user = nombre; \n    \n    this.post.userId = userId;\n\n    this.api.createPost( this.post ).subscribe( () => {\n\n      console.log('Creado Correctamente');\n      this.getPosts();\n      this.limpiar(); \n\n    }, ( error ) => console.log( 'Error'+ error ) )\n  }\n\n  \n  deletePost( id ) {\n    this.api.deletePost( id ).subscribe( () => {\n      console.log('Post '+id+' Borrado Correctamente');\n      this.getPosts();\n    } , (error ) => console.log('Error' + error ))\n  }\n  \n  \n  updatePost( post ) {\n    let nav: NavigationExtras={       //declaro elemento navigationExtras\n      state: { post: post }\n    };\n    this.router.navigate(['/editable'], nav )\n  }\n\n\n\n\n\n  limpiar() {\n    this.post.title = \"\";\n    this.post.body = \"\";\n  }\n  \n  volver(){\n    this.router.navigate(['/ruta'] )\n  }\n\n\n\n\n  //Metodos para controlar validaciones del form\n  get errorControl() {\n    return this.ionicForm.controls;\n  }\n\n  submitForm() {\n    this.isSubmitted = true;\n    if (!this.ionicForm.valid) {\n      console.log('Ingrese todos los valores requeridos!!');\n      return false;\n    } else {\n      this.guardarPost(); \n    }\n  }\n\n\n\n};","export default \"* {\\n  font-family: Georgia, Garamond;\\n}\\n\\n.body {\\n  background-color: gray;\\n}\\n\\n.container {\\n  padding-right: 45%;\\n}\\n\\n.tla {\\n  width: 200%;\\n  white-space: auto;\\n}\\n\\n.auto {\\n  width: 500px;\\n  padding-right: 100%;\\n}\\n\\n.centrar {\\n  width: 80%;\\n  margin-left: 10%;\\n  height: 34px;\\n}\\n\\n.error {\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9waW5pb25zLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNJLDhCQUFBO0FBRko7O0FBS0E7RUFDSSxzQkFBQTtBQUZKOztBQU1BO0VBQ0ksa0JBQUE7QUFISjs7QUFNQTtFQUNJLFdBQUE7RUFDQSxpQkFBQTtBQUhKOztBQU1BO0VBQ0ksWUFBQTtFQUNBLG1CQUFBO0FBSEo7O0FBUUE7RUFDSSxVQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0FBTEo7O0FBV0E7RUFDSSxVQUFBO0FBUkoiLCJmaWxlIjoib3BpbmlvbnMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG5cblxuKiB7XG4gICAgZm9udC1mYW1pbHk6ICBHZW9yZ2lhLEdhcmFtb25kO1xufVxuXG4uYm9keXsgXG4gICAgYmFja2dyb3VuZC1jb2xvcjogZ3JheTtcbn1cblxuXG4uY29udGFpbmVye1xuICAgIHBhZGRpbmctcmlnaHQ6IDQ1JTtcbn1cblxuLnRsYXtcbiAgICB3aWR0aDogMjAwJTtcbiAgICB3aGl0ZS1zcGFjZTogYXV0bztcbn0gICAgXG5cbi5hdXRve1xuICAgIHdpZHRoOiA1MDBweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAxMDAlO1xufSAgICBcblxuXG5cbi5jZW50cmFye1xuICAgIHdpZHRoOiA4MCU7XG4gICAgbWFyZ2luLWxlZnQ6IDEwJTtcbiAgICBoZWlnaHQ6IDM0cHg7XG59XG5cblxuXG5cbi5lcnJvcntcbiAgICBjb2xvcjogcmVkO1xufSJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <div class=\\\"container\\\">\\n      <div class=\\\"tla\\\">\\n        <img src=\\\"assets/img/tla.PNG\\\" alt=\\\"\\\">\\n      </div>\\n    </div>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <ion-card>\\n\\n    <ion-card-header>\\n      <ion-title>Evalua</ion-title>\\n    </ion-card-header>\\n\\n    <form [formGroup]=\\\"ionicForm\\\" (ngSubmit)=\\\"submitForm()\\\" novalidate>\\n\\n      <ion-item class=\\\"ion-padding-horizontal\\\">\\n        <ion-label position=\\\"floating\\\">Titulo</ion-label>\\n        <ion-input formControlName=\\\"title\\\" type=\\\"text\\\"  [(ngModel)]=\\\"post.title\\\"></ion-input>\\n      </ion-item>\\n\\n      <span class=\\\"error ion-padding\\\" *ngIf=\\\"isSubmitted && errorControl.title.errors?.required\\\">\\n      Titulo es requerido.\\n      </span>\\n      <span class=\\\"error ion-padding\\\" *ngIf=\\\"isSubmitted && errorControl.title.errors?.minlength\\\">\\n      Debe Contener 3 caracteres minimo.\\n      </span>\\n\\n      <ion-item class=\\\"ion-padding-horizontal\\\">\\n        <ion-label position=\\\"floating\\\">Opinion</ion-label>\\n        <ion-input formControlName=\\\"opinion\\\" type=\\\"text\\\"  [(ngModel)]=\\\"post.body\\\"></ion-input>\\n      </ion-item>\\n      \\n      <span class=\\\"error ion-padding\\\" *ngIf=\\\"isSubmitted && errorControl.opinion.errors?.required\\\">\\n      Opinion es requerida.\\n      </span>\\n      <span class=\\\"error ion-padding\\\" *ngIf=\\\"isSubmitted && errorControl.opinion.errors?.minlength\\\">\\n      Debe contener 5 caracteres minimo\\n      </span>\\n\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col><ion-button shape=\\\"round\\\" expand=\\\"block\\\" (click)=\\\"limpiar()\\\">Limpiar</ion-button></ion-col>\\n          <ion-col><ion-button type=\\\"submit\\\" shape=\\\"round\\\" expand=\\\"block\\\">Guardar</ion-button></ion-col>\\n        </ion-row>\\n      </ion-grid>\\n\\n    </form>\\n\\n    <ion-button  class=\\\"centrar\\\" expand=\\\"block\\\" (click)=\\\"volver()\\\">VOLVER</ion-button>\\n    <br>\\n\\n  </ion-card>\\n\\n\\n  <ion-card>\\n\\n    <ion-list-header>     \\n      <ion-title>Opiniones</ion-title>\\n    </ion-list-header>  \\n\\n    <ion-list>  \\n      <ion-item *ngFor=\\\"let post of posts\\\">\\n\\n        <ion-label ><h4>{{post.title}}</h4><p>{{post.body}}</p></ion-label>\\n\\n        <ion-button (click)=\\\"updatePost(post)\\\">\\n          <ion-icon name=\\\"create-outline\\\"></ion-icon>\\n        </ion-button>\\n\\n        <ion-button (click)=\\\"deletePost(post.id)\\\">\\n          <ion-icon slot=\\\"icon-only\\\" name=\\\"trash-outline\\\"></ion-icon>\\n        </ion-button>\\n \\n      </ion-item>\\n    </ion-list>\\n\\n  </ion-card>\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}